<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BMI Professional Calculator</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f0f4f8;
    text-align: center;
    padding: 20px;
    transition: 0.3s;
}

.dark {
    background: #121212;
    color: white;
}

.container {
    max-width: 420px;
    margin: auto;
    background: white;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}

.dark .container {
    background: #1e1e1e;
}

input, select {
    width: 90%;
    padding: 10px;
    margin: 8px 0;
    border-radius: 8px;
    border: 1px solid #ccc;
}

button {
    padding: 10px 18px;
    margin: 10px 5px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background: #0066cc;
    color: white;
    font-size: 14px;
}

canvas {
    margin-top: 15px;
}

.result {
    font-size: 18px;
    font-weight: bold;
    margin-top: 10px;
}

.note {
    font-size: 12px;
    margin-top: 12px;
    color: gray;
}
</style>
</head>

<body>

<button onclick="toggleDark()">ðŸŒ— Toggle Dark Mode</button>

<div class="container">
<h2>ðŸ©º BMI Professional Calculator</h2>

<select id="unitSelect" onchange="changeUnit()">
    <option value="metric">Metric (kg / cm)</option>
    <option value="imperial">Imperial (lb / ft + in)</option>
</select>

<div id="metricBox">
    <input type="number" id="kg" placeholder="Weight (kg)">
    <input type="number" id="cm" placeholder="Height (cm)">
</div>

<div id="imperialBox" style="display:none;">
    <input type="number" id="lb" placeholder="Weight (lb)">
    <input type="number" id="ft" placeholder="Height (ft)">
    <input type="number" id="inch" placeholder="Height (inch)">
</div>

<button onclick="calculate()">Calculate BMI</button>

<canvas id="gauge" width="300" height="160"></canvas>

<div class="result" id="bmiResult"></div>
<div class="result" id="idealResult"></div>

<div class="note">For educational purpose only</div>
</div>

<script>

function changeUnit() {
    let unit = document.getElementById("unitSelect").value;
    document.getElementById("metricBox").style.display =
        unit === "metric" ? "block" : "none";
    document.getElementById("imperialBox").style.display =
        unit === "imperial" ? "block" : "none";
}

function calculate() {
    let unit = document.getElementById("unitSelect").value;
    let weight, height;

    if (unit === "metric") {
        weight = parseFloat(document.getElementById("kg").value);
        height = parseFloat(document.getElementById("cm").value) / 100;
    } else {
        weight = parseFloat(document.getElementById("lb").value) * 0.453592;
        let ft = parseFloat(document.getElementById("ft").value) || 0;
        let inch = parseFloat(document.getElementById("inch").value) || 0;
        height = ((ft * 12) + inch) * 0.0254;
    }

    if (!weight || !height || height <= 0) {
        alert("Please enter valid values");
        return;
    }

    let bmi = weight / (height * height);
    let bmiRounded = bmi.toFixed(2);

    let category = "";
    if (bmi < 18.5) category = "Underweight";
    else if (bmi < 25) category = "Normal";
    else if (bmi < 30) category = "Overweight";
    else if (bmi < 35) category = "Obesity I";
    else if (bmi < 40) category = "Obesity II";
    else category = "Obesity III";

    document.getElementById("bmiResult").innerHTML =
        "BMI: " + bmiRounded + " (" + category + ")";

    let minIdeal = (18.5 * height * height).toFixed(1);
    let maxIdeal = (24.9 * height * height).toFixed(1);

    document.getElementById("idealResult").innerHTML =
        "Ideal Weight Range: " + minIdeal + " kg â€“ " + maxIdeal + " kg";

    animateGauge(bmi);
}

function animateGauge(bmi) {
    let canvas = document.getElementById("gauge");
    let ctx = canvas.getContext("2d");
    let centerX = canvas.width / 2;
    let centerY = canvas.height;
    let radius = 100;

    let maxBMI = 40;
    let targetAngle = Math.PI + (Math.min(bmi, maxBMI) / maxBMI) * Math.PI;
    let currentAngle = Math.PI;

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Background
        ctx.beginPath();
        ctx.arc(centerX, centerY, radius, Math.PI, 2 * Math.PI);
        ctx.strokeStyle = "#ddd";
        ctx.lineWidth = 18;
        ctx.stroke();

        // Active arc
        ctx.beginPath();
        ctx.arc(centerX, centerY, radius, Math.PI, currentAngle);
        ctx.strokeStyle = getColor(bmi);
        ctx.lineWidth = 18;
        ctx.stroke();

        if (currentAngle < targetAngle) {
            currentAngle += 0.02;
            requestAnimationFrame(draw);
        }
    }

    draw();
}

function getColor(bmi) {
    if (bmi < 18.5) return "blue";
    if (bmi < 25) return "green";
    if (bmi < 30) return "orange";
    return "red";
}

function toggleDark() {
    document.body.classList.toggle("dark");
}

</script>

</body>
</html>
